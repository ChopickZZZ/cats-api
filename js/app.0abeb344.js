(function(){"use strict";var t={2773:function(t,e,a){var n=a(9242),o=a(3396);function s(t,e,a,n,s,i){const r=(0,o.up)("AppHeader"),c=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(r),(0,o.Wm)(c)],64)}const i={class:"header"},r={class:"menu container"},c=(0,o.Uk)("Все котики"),l=(0,o.Uk)("Любимые котики");function u(t,e,a,n,s,u){const d=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("header",i,[(0,o._)("ul",r,[(0,o.Wm)(d,{to:"/",class:"menu__link"},{default:(0,o.w5)((()=>[c])),_:1}),(0,o.Wm)(d,{to:"/favourite",class:"menu__link"},{default:(0,o.w5)((()=>[l])),_:1})])])}var d={},g=a(89);const f=(0,g.Z)(d,[["render",u],["__scopeId","data-v-9e931a16"]]);var p=f,h={components:{AppHeader:p}};const v=(0,g.Z)(h,[["render",s]]);var m=v,C=a(678);const _={class:"page"},w={class:"container"},y={class:"cats"},O={key:0,class:"cats__loading"};function k(t,e,a,n,s,i){const r=(0,o.up)("AppCat");return(0,o.wg)(),(0,o.iD)("main",_,[(0,o._)("div",w,[(0,o._)("div",y,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.cats,(t=>((0,o.wg)(),(0,o.j4)(r,{key:t.id,image:t.url,id:t.id,onCatToggle:i.toggleCats},null,8,["image","id","onCatToggle"])))),128))]),s.loading?((0,o.wg)(),(0,o.iD)("p",O," ... Загружаем еще котиков ... ")):(0,o.kq)("",!0)])])}var T=a(7139);const b=t=>((0,o.dD)("data-v-098a2cde"),t=t(),(0,o.Cn)(),t),A={class:"cat__image"},S=["src"],E=b((()=>(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[(0,o._)("path",{d:"M12 4.248c-3.148-5.402-12-3.825-12 2.944 0 4.661 5.571 9.427 12 15.808 6.43-6.381 12-11.147 12-15.808 0-6.792-8.875-8.306-12-2.944z"})],-1))),D=[E];function j(t,e,a,n,s,i){return(0,o.wg)(),(0,o.iD)("div",{class:(0,T.C_)(["cat",{favourite:s.isAdded}])},[(0,o._)("div",A,[(0,o._)("img",{src:a.image,alt:""},null,8,S)]),(0,o._)("button",{class:"cat__fav",onClick:e[0]||(e[0]=t=>i.catHandler(a.id))},D)],2)}var H={props:{image:{type:String},id:{type:String}},emits:["catToggle"],data(){return{isAdded:!1}},methods:{catHandler(t){this.isAdded=!this.isAdded,this.$emit("catToggle",t,this.isAdded)}}};const M=(0,g.Z)(H,[["render",j],["__scopeId","data-v-098a2cde"]]);var $=M;const F=(t,e)=>{let a,n,o=!1;function s(){if(o)return a=arguments,void(n=this);t.apply(this,arguments),o=!0,setTimeout((function(){o=!1,a&&(s.apply(n,a),a=n=null)}),e)}return s};var I={mounted(){this.loadCats(),this.loadMoreCats=F(this.loadMoreCats,300),window.addEventListener("scroll",this.loadMoreCats)},data(){return{cats:[],limit:15,loading:!1}},methods:{async loadCats(){try{const t=await fetch(`https://api.thecatapi.com/v1/images/search?limit=${this.limit}`),e=await t.json();e.forEach((t=>this.cats.push(t))),this.loading=!1}catch(t){console.error(t.message)}},async loadMoreCats(t){t.target.documentElement.scrollHeight-(t.target.documentElement.scrollTop+window.innerHeight)<3&&(this.loading=!0,this.loadCats())},toggleCats(t,e){const a=this.cats.find((e=>e.id===t));e?(this.$store.dispatch("setCat",a),localStorage.setItem("fav",JSON.stringify(this.$store.getters.getFavouriteCats))):(this.$store.dispatch("removeCat",a),localStorage.setItem("fav",JSON.stringify(this.$store.getters.getFavouriteCats)))}},components:{AppCat:$}};const x=(0,g.Z)(I,[["render",k]]);var Z=x;const J={class:"page"},N={class:"container"},W={key:0,class:"cats__empty"},P={key:1,class:"cats"};function Y(t,e,a,n,s,i){const r=(0,o.up)("AppCat");return(0,o.wg)(),(0,o.iD)("main",J,[(0,o._)("div",N,[0===i.favCats.length?((0,o.wg)(),(0,o.iD)("h1",W," Вы еще не добавили ни одного котика ")):((0,o.wg)(),(0,o.iD)("div",P,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.favCats,(t=>((0,o.wg)(),(0,o.j4)(r,{key:t.id,image:t.url,id:t.id,class:"favourite",onCatToggle:i.removeCat},null,8,["image","id","onCatToggle"])))),128))]))])])}var K={mounted(){this.loadCatsFromStorage()},computed:{favCats(){return this.$store.getters.getFavouriteCats}},methods:{loadCatsFromStorage(){if(0!==localStorage.length&&0===this.favCats.length){const t=JSON.parse(localStorage.getItem("fav"));t.forEach((t=>this.$store.dispatch("setCat",t)))}},removeCat(t){const e=this.favCats.find((e=>e.id===t));this.$store.dispatch("removeCat",e),localStorage.setItem("fav",JSON.stringify(this.favCats))}},components:{AppCat:$}};const R=(0,g.Z)(K,[["render",Y],["__scopeId","data-v-e4180b1a"]]);var U=R;const V=(0,C.p7)({history:(0,C.PO)(),routes:[{path:"/",component:Z},{path:"/favourite",component:U},{path:"/:notFound(.*)",redirect:"/"}]});var q=V,z=a(65),B=(0,z.MT)({state:{cats:[]},getters:{getFavouriteCats(t){return t.cats}},mutations:{SET_CAT(t,e){t.cats.push(e)},REMOVE_CAT(t,e){t.cats=t.cats.filter((t=>t.id!==e.id))}},actions:{setCat({commit:t},e){t("SET_CAT",e)},removeCat({commit:t},e){t("REMOVE_CAT",e)}},modules:{}});(0,n.ri)(m).use(B).use(q).mount("#app")}},e={};function a(n){var o=e[n];if(void 0!==o)return o.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,a),s.exports}a.m=t,function(){var t=[];a.O=function(e,n,o,s){if(!n){var i=1/0;for(u=0;u<t.length;u++){n=t[u][0],o=t[u][1],s=t[u][2];for(var r=!0,c=0;c<n.length;c++)(!1&s||i>=s)&&Object.keys(a.O).every((function(t){return a.O[t](n[c])}))?n.splice(c--,1):(r=!1,s<i&&(i=s));if(r){t.splice(u--,1);var l=o();void 0!==l&&(e=l)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[n,o,s]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,s,i=n[0],r=n[1],c=n[2],l=0;if(i.some((function(e){return 0!==t[e]}))){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(c)var u=c(a)}for(e&&e(n);l<i.length;l++)s=i[l],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(u)},n=self["webpackChunkcats"]=self["webpackChunkcats"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(2773)}));n=a.O(n)})();
//# sourceMappingURL=app.0abeb344.js.map